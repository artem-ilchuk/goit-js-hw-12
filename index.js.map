{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loader = document.querySelector('.loader');\nexport const loadMore = document.querySelector('.load-more-js');\nconst loadMoreLoader = document.querySelector('.load-more-loader');\n\nexport function createMarkup(data) {\n  const gallery = document.querySelector('.gallery');\n  if (data.totalHits > 0) {\n    gallery.insertAdjacentHTML(\n      'beforeend',\n      data.hits\n        .map(\n          image => `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${image.webformatURL}\"\n              data-source=\"${image.largeImageURL}\"\n              alt=\"${image.tags}\"\n            />\n          </a>          \n          <ul class='gallery-list-details'>\n            <li class='gallery-item-details'><p class='gallery-item-text'>Likes</p><p class=\"item-value\">${image.likes}</p></li>\n            <li class='gallery-item-details'><p class='gallery-item-text'>Views</p><p class=\"item-value\">${image.views}</p></li>\n            <li class='gallery-item-details'><p class='gallery-item-text'>Comments</p><p class=\"item-value\">${image.comments}</p></li>\n            <li class='gallery-item-details'><p class='gallery-item-text'>Downloads</p><p class=\"item-value\">${image.downloads}</p></li>\n          </ul>          \n        </li>`\n        )\n        .join('')\n    );\n\n    let myGallery = new SimpleLightbox('.gallery a', {\n      overlayOpacity: 0.9,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    myGallery.refresh();\n  } else {\n    iziToastMes();\n    gallery.innerHTML = '';\n  }\n}\n\n/*---------Loaders-------*/\n\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\nexport function showLoaderMore() {\n  loadMoreLoader.classList.remove('hidden');\n}\n\nexport function hideLoaderMore() {\n  loadMoreLoader.classList.add('hidden');\n}\n\n/*----------------------------*/\n\n/*---------Load More-------*/\n\nexport function showLoadMoreBtn() {\n  loadMore.classList.remove('hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  loadMore.classList.add('hidden');\n}\n\n/*----------------------------*/\n\n/*---------IziMessages-------*/\n\nexport function greetingMessage() {\n  iziToast.show({\n    title: 'Hello',\n    titleColor: '#000',\n    message: 'Welcome to our Website!',\n    messageColor: '#000',\n    position: 'topRight',\n    color: '#09f',\n    icon: 'fas fa-bell',\n    timeout: 4000,\n  });\n}\n\nexport function iziToastMes() {\n  iziToast.error({\n    title: 'Error',\n    titleColor: '#fff',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: '#fff',\n    color: '#ef4040',\n    position: 'topRight',\n    icon: 'fas fa-exclamation-triangle',\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    timeout: 3000,\n  });\n}\n\nexport function emptyLine() {\n  iziToast.error({\n    title: 'Error',\n    titleColor: '#fff',\n    message: 'Please fill in the search images field',\n    messageColor: '#fff',\n    color: '#ef4040',\n    position: 'topRight',\n    icon: 'fas fa-exclamation-triangle',\n    transitionIn: 'flipInX',\n    transitionOut: 'flipOutX',\n    timeout: 3000,\n  });\n}\n\nexport function endOfRes() {\n  iziToast.warning({\n    title: 'Caution',\n    titleColor: '#000',\n    message: 'We are sorry, but you have reached the end of search results.',\n    messageColor: '#000',\n    position: 'bottomCenter',\n    color: 'yellow',\n    icon: 'fas fa-exclamation-circle',\n    timeout: 4000,\n  });\n}\n\nexport function warningMessage() {\n  iziToast.warning({\n    title: 'Caution',\n    titleColor: '#000',\n    message: 'Something went wrong, please try again',\n    messageColor: '#000',\n    position: 'topRight',\n    color: 'orange',\n    icon: 'fas fa-exclamation-circle',\n    timeout: 4000,\n  });\n}\n","import { warningMessage } from './render-functions.js';\nimport axios from 'axios';\n\nexport async function serviceImg(query, page = 1) {\n  const API_KEY = '46906317-bfa2c9d7c6708063f650b6890';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  try {\n    const result = await axios(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    });\n    return result.data;\n  } catch (error) {\n    warningMessage();\n    throw new Error(error.statusText);\n  }\n}\n","import { serviceImg } from './js/pixabay-api';\nimport {\n  iziToastMes,\n  createMarkup,\n  loadMore,\n  hideLoader,\n  showLoader,\n  hideLoadMoreBtn,\n  showLoadMoreBtn,\n  endOfRes,\n  greetingMessage,\n  emptyLine,\n  hideLoaderMore,\n  showLoaderMore,\n} from './js/render-functions';\n\ndocument.addEventListener('DOMContentLoaded', greetingMessage);\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst submitButton = form.querySelector('button[type=\"submit\"]');\nlet page = 1;\nlet searchValue = '';\nlet previousSearch = '';\n\nloadMore.addEventListener('click', onLoadMore);\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  searchValue = event.target.elements.search.value.trim();\n  if (searchValue && searchValue !== previousSearch) {\n    previousSearch = searchValue;\n    page = 1;\n\n    showLoader();\n    gallery.innerHTML = '';\n    submitButton.disabled = true;\n    try {\n      const response = await serviceImg(searchValue, page);\n      form.reset();\n      createMarkup(response);\n      if (page < Math.ceil(response.totalHits / 15)) {\n        showLoadMoreBtn();\n      }\n    } catch (error) {\n      console.error(error);\n      iziToastMes('ðŸš¨ Something went wrong while fetching images!');\n    } finally {\n      hideLoader();\n      submitButton.disabled = false;\n    }\n  } else {\n    emptyLine();\n  }\n});\n\nasync function onLoadMore() {\n  if (searchValue !== previousSearch) return;\n  loadMore.disabled = true;\n  hideLoadMoreBtn();\n  showLoaderMore();\n\n  page++;\n\n  try {\n    const response = await serviceImg(searchValue, page);\n    createMarkup(response);\n    const totalPages = Math.ceil(response.totalHits / 15);\n\n    if (page >= totalPages) {\n      endOfRes();\n    } else {\n      showLoadMoreBtn();\n    }\n\n    const item = document.querySelector('.gallery-item');\n    const itemHeight = item.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToastMes('ðŸš¨ Something went wrong while fetching images!');\n  } finally {\n    hideLoader();\n    hideLoaderMore();\n    loadMore.disabled = false;\n  }\n}\n"],"names":["loader","loadMore","loadMoreLoader","createMarkup","data","gallery","image","SimpleLightbox","iziToastMes","showLoader","hideLoader","showLoaderMore","hideLoaderMore","showLoadMoreBtn","hideLoadMoreBtn","greetingMessage","iziToast","emptyLine","endOfRes","warningMessage","serviceImg","query","page","API_KEY","BASE_URL","axios","error","form","submitButton","searchValue","previousSearch","onLoadMore","event","response","totalPages","itemHeight"],"mappings":"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"}